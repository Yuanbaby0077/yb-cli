#!/usr/bin/env node

const inquirer = require('inquirer')
const chalk = require('chalk')
const fs = require('fs')
const tpl = require(`${__dirname}/../template`)

let questions = [
  {
    name: "name",
    message: '请输入要删除的模板名称',
    validate(val) {
      if (!val) return 'Name is required!'
      if (!tpl[val]) return 'Template does`t exist!'
      return true
    }
  }
]

inquirer
  .prompt(questions)
  .then(ans => {
    let { name } = ans
    delete tpl[name]
    fs.writeFile(`${__dirname}/../template.json`, JSON.stringify(tpl), 'utf-8', err => {
      if (err) throw err
      console.log('\n')
      console.log(chalk.green('deleted successfully! \n'))
      console.log(chalk.gray('the latest template list is: \n'))
      console.log(tpl)
      console.log('\n')
    })
  })
